<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¤Ø´Ø± Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ - 2024/2025</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f4f6f9;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow-x: auto;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 3px solid #0056b3;
            padding-bottom: 20px;
        }

        .header-text { text-align: right; flex-grow: 1; }
        .logo-container img { max-height: 100px; width: auto; }
        h1 { color: #0056b3; margin: 0; font-size: 24px; font-weight: 700; }
        h2 { color: #555; margin: 5px 0 0 0; font-size: 16px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† */
        .admin-panel {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .admin-controls { display: none; gap: 10px; } /* Ù…Ø®ÙÙŠ Ø­ØªÙ‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-login { background: #3498db; color: white; }
        .btn-logout { background: #e74c3c; color: white; }
        .btn-save { background: #27ae60; color: white; }
        .btn-reset { background: #f39c12; color: white; font-size: 12px; }
        
        button:hover { opacity: 0.9; transform: translateY(-1px); }

        /* Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1200px;
            margin-top: 10px;
        }

        thead { background-color: #0056b3; color: white; }

        th, td {
            padding: 12px 5px;
            text-align: center;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
            vertical-align: middle;
        }

        /* ØªØ«Ø¨ÙŠØª Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
        th:first-child, td:first-child,
        th:nth-child(2), td:nth-child(2) {
            position: sticky;
            background-color: #f9f9f9;
            z-index: 2;
            font-weight: bold;
            text-align: right;
            border-left: 2px solid #ddd;
        }
        
        th:first-child, td:first-child { right: 0; }
        th:nth-child(2), td:nth-child(2) { right: 150px; }
        
        thead th:first-child, thead th:nth-child(2) {
            background-color: #004494;
            color: white;
        }

        /* ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
        body.editing-mode td.editable {
            border: 2px dashed #3498db;
            cursor: pointer;
            background-color: #f0f8ff;
        }
        body.editing-mode td.editable:hover { background-color: #d6eaf8; }

        /* Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø­Ø§Ù„Ø§Øª */
        .status-ok { color: #28a745; font-weight: bold; font-size: 20px; }
        .status-late { color: #dc3545; font-weight: bold; font-size: 20px; } /* Ø£Ø­Ù…Ø± ØºØ§Ù…Ù‚ */

        .badge {
            display: inline-block; padding: 4px 10px; border-radius: 12px;
            font-size: 13px; font-weight: bold; color: white;
        }
        .badge-red { background-color: #dc3545; }
        .badge-green { background-color: #28a745; }

        .note-text {
            font-size: 11px; color: #444; background: #fff3cd; 
            padding: 4px; border-radius: 4px; max-width: 200px; margin: auto;
        }

        .legend {
            display: flex; gap: 20px; margin-bottom: 15px; font-size: 14px;
            background: #e9ecef; padding: 10px; border-radius: 5px;
        }

        footer {
            margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd;
            text-align: center; font-size: 14px; color: #0056b3; font-weight: bold;
        }
        
        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loader { text-align: center; padding: 20px; font-weight: bold; color: #0056b3; }

        @media print {
            .admin-panel { display: none !important; }
            .container { box-shadow: none; width: 100%; margin: 0; }
            th, td { border: 1px solid #ccc; font-size: 12px; }
        }
    </style>
</head>
<body>

<div class="container">
    
    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="admin-panel">
        <div style="font-weight: bold;">ğŸ”’ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙÙŠÙ†</div>
        <div id="loginSection">
            <button class="btn-login" onclick="adminLogin()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
        </div>
        <div id="adminControls" class="admin-controls">
            <span style="font-size:12px; color:#bdc3c7;">Ø§Ù†Ù‚Ø± Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ (âœ”/âœ˜) Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ØŒ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„ÙƒØªØ§Ø¨Ø©</span>
            <button class="btn-save" onclick="saveToFirebase()">â˜ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
            <button class="btn-reset" onclick="uploadInitialData()">âš  ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©)</button>
            <button class="btn-logout" onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>

    <header>
        <div class="header-text">
            <h1>Ù…Ø¤Ø´Ø± Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ù„Ø±ÙØ¹ Ù…Ø³ØªØ®Ù„ØµØ§Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø·Ø¨ÙŠØ©</h1>
            <h2>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© 2024 / 2025</h2>
        </div>
        <div class="logo-container">
            <img src="TabukCluster.jpeg" alt="Ø´Ø¹Ø§Ø± ØªØ¬Ù…Ø¹ ØªØ¨ÙˆÙƒ Ø§Ù„ØµØ­ÙŠ">
        </div>
    </header>

    <div class="legend">
        <div><span class="status-ok">âœ”</span> ØªÙ… Ø§Ù„Ø±ÙØ¹ / Ù…ÙƒØªÙ…Ù„</div>
        <div><span class="status-late">âœ˜</span> Ù…ØªØ£Ø®Ø± / Ù„Ù… ÙŠØ±Ø¯</div>
        <div><strong>Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£Ø­Ù…Ø±:</strong> Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ù„ØµØ§Øª Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©</div>
    </div>

    <div id="loader">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±...</div>

    <table id="mainTable" style="display:none;">
        <thead>
            <tr>
                <th style="min-width: 150px;">Ø§Ù„Ù…ÙˆÙ‚Ø¹ / Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰</th>
                <th style="min-width: 140px;">Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„</th>
                <th style="width: 60px;">Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©</th>
                <th>Ø£ÙƒØªÙˆØ¨Ø± 25</th> <th>Ø³Ø¨ØªÙ…Ø¨Ø± 25</th> <th>Ø£ØºØ³Ø·Ø³ 25</th> <th>ÙŠÙˆÙ„ÙŠÙˆ 25</th>
                <th>ÙŠÙˆÙ†ÙŠÙˆ 25</th> <th>Ù…Ø§ÙŠÙˆ 25</th> <th>Ø£Ø¨Ø±ÙŠÙ„ 24</th> <th>Ù…Ø§Ø±Ø³ 25</th>
                <th>ÙØ¨Ø±Ø§ÙŠØ± 25</th> <th>ÙŠÙ†Ø§ÙŠØ± 25</th> <th>Ø¯ÙŠØ³Ù…Ø¨Ø± 24</th> <th>Ù†ÙˆÙÙ…Ø¨Ø± 24</th>
                <th style="min-width: 200px;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ø§Ù…Ø©</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
        </tbody>
    </table>

    <footer>
        ØªÙ… Ø§Ù„Ø§Ø¹Ø¯Ø§Ø¯ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ù‚Ø³Ù… Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø·Ø¨ÙŠØ© Ø¨ØªØ¬Ù…Ø¹ ØªØ¨ÙˆÙƒ Ø§Ù„ØµØ­ÙŠ
    </footer>
</div>

<!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase -->
<script type="module">
    // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…Ù† CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ
    const firebaseConfig = {
        apiKey: "AIzaSyAP-wgrP2o6ifi3XuaMK-lBB43nvrs3GfA",
        authDomain: "tabuk-kpi.firebaseapp.com",
        projectId: "tabuk-kpi",
        storageBucket: "tabuk-kpi.firebasestorage.app",
        messagingSenderId: "537604438384",
        appId: "1:537604438384:web:4391b219241c54f7d6f7b5",
        measurementId: "G-9FCG4452CQ"
    };

    // ØªØ´ØºÙŠÙ„ Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    
    // Ù…ØªØºÙŠØ± Ø¹Ø§Ù„Ù…ÙŠ Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
    window.currentData = [];
    window.isAdmin = false;

    // Ø¯Ø§Ù„Ø©: Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
    const dataRef = ref(db, 'kpi_data');
    onValue(dataRef, (snapshot) => {
        const data = snapshot.val();
        const loader = document.getElementById('loader');
        const table = document.getElementById('mainTable');
        
        if (data) {
            window.currentData = data;
            renderTable(data);
            loader.style.display = 'none';
            table.style.display = 'table';
        } else {
            loader.innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª! ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø³Ø¤ÙˆÙ„ ÙˆØ¶ØºØ· 'ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'.";
        }
    });

    // Ø¯Ø§Ù„Ø©: Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ÙÙŠØ±Ø¨ÙŠØ²
    window.saveToFirebase = function() {
        if (!window.isAdmin) return;
        set(ref(db, 'kpi_data'), window.currentData)
            .then(() => {
                alert("ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø¨Ù†Ø¬Ø§Ø­! âœ… Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙÙˆØ±Ø§Ù‹.");
            })
            .catch((error) => {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸: " + error);
            });
    };

    // Ø¯Ø§Ù„Ø©: Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© (Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)
    window.uploadInitialData = function() {
        if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©ØŸ (Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ©)")) {
            const initialData = [
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø¶Ø¨Ø§ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø´Ø±ÙƒØ© Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„ÙŠ", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø£Ù…Ù„Ø¬ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø³Ø§Ø¨Ù‚Ø© (Ã—)" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø­Ù‚Ù„ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "Ø³Ø¬Ù„ Ø³Ø§Ø¨Ù‚ ØºÙŠØ± Ù…Ù†ØªØ¸Ù… (Ã—)" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¨Ø¯Ø¹ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 1, months: ["âœ˜","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "ØªØ£Ø®Ø± Ø§Ù„Ø±ÙØ¹ Ù„Ø´Ù‡Ø± Ø£ÙƒØªÙˆØ¨Ø±" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø£Ø´ÙˆØ§Ù‚ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ ØªÙŠÙ…Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø£Ø¨ÙˆØ±Ø§ÙƒØ© Ø§Ù„Ø¹Ø§Ù…", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ù„Ùƒ ÙÙ‡Ø¯", cont: "Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰", late: 0, months: ["âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©", cont: "Ø³Ø±Ø§ÙƒÙˆ / Ø§Ù„Ø¹Ø±ÙØ¬", late: 12, months: ["âœ˜","âœ˜","âœ˜","âœ˜","âœ˜","âœ˜","âœ˜","âœ˜","âœ˜","âœ”","âœ”","âœ”"], notes: "ÙŠÙ„Ø²Ù… Ù†Ù‚Ù„ Ø§Ù„Ø¹Ù‚Ø¯ Ù…Ù† ÙØ±Ø¹ Ø§Ù„ÙˆØ²Ø§Ø±Ø© Ù„ØªØ¬Ù…Ø¹ ØªØ¨ÙˆÙƒ" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯", cont: "Ø±Ø¬Ø¨ ÙˆØ³Ù„Ø³Ù„Ù‡", late: 1, months: ["âœ˜","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "ØªÙ…Ø¯ÙŠØ¯ 10% / Ø´Ø±Ø§Ø¡ Ù…Ø¨Ø§Ø´Ø±" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„", cont: "Ø§Ù„Ù…Ø¬Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠ", late: 1, months: ["âœ˜","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "" },
                { name: "Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„ÙˆØ¬Ù‡", cont: "Ø¯Ø§Ø± Ø§Ù„Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©", late: 1, months: ["âœ˜","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”","âœ”"], notes: "Ù…Ø³ØªØ®Ù„ØµØ§Øª Ø®ØªØ§Ù…ÙŠØ© Ù…ØªØ£Ø®Ø±Ø©" }
            ];
            
            window.currentData = initialData; // ØªØ­Ø¯ÙŠØ« Ù…Ø­Ù„ÙŠ
            window.saveToFirebase(); // Ø±ÙØ¹ Ù„Ù„Ø³ÙŠØ±ÙØ±
        }
    };
</script>

<script>
    // Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø®Ø§Øµ Ø¨ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI Logic)
    
    function adminLogin() {
        const pass = prompt("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:");
        if(pass === "1234") {
            window.isAdmin = true;
            document.body.classList.add('editing-mode');
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('adminControls').style.display = 'flex';
            // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù„ØªÙØ¹ÙŠÙ„ Ø®ØµØ§Ø¦Øµ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
            renderTable(window.currentData);
        } else {
            alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
        }
    }

    function renderTable(data) {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';

        data.forEach((row, rowIndex) => {
            const tr = document.createElement('tr');
            
            // 1. Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰
            tr.innerHTML += `<td>${row.name}</td>`;
            // 2. Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„
            tr.innerHTML += `<td>${row.cont}</td>`;
            // 3. Ø§Ù„Ù…ØªØ£Ø®Ø±Ø©
            let badgeClass = row.late > 0 ? 'badge-red' : 'badge-green';
            tr.innerHTML += `<td class="editable" onclick="editCell(${rowIndex}, 'late')"><span class="badge ${badgeClass}">${row.late}</span></td>`;

            // 4. Ø§Ù„Ø£Ø´Ù‡Ø± (Loop)
            row.months.forEach((status, monthIndex) => {
                let statusClass = status.includes('âœ”') ? 'status-ok' : 'status-late';
                // Ù†Ø¶ÙŠÙ Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ ÙÙ‚Ø·
                tr.innerHTML += `<td class="editable ${statusClass}" 
                                     ondblclick="toggleStatus(${rowIndex}, ${monthIndex})"
                                     onclick="editMonthText(${rowIndex}, ${monthIndex})">
                                     ${status}
                                 </td>`;
            });

            // 5. Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
            tr.innerHTML += `<td class="editable note-text" onclick="editCell(${rowIndex}, 'notes')">${row.notes}</td>`;

            tbody.appendChild(tr);
        });
    }

    // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù…
    window.editCell = function(rowIndex, field) {
        if (!window.isAdmin) return;
        
        let oldVal = window.currentData[rowIndex][field];
        let newVal = prompt("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø©:", oldVal);
        
        if (newVal !== null) {
            window.currentData[rowIndex][field] = newVal;
            renderTable(window.currentData); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
        }
    };
    
    // ØªØ¹Ø¯ÙŠÙ„ Ù†Øµ Ø§Ù„Ø´Ù‡Ø± (Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©)
    window.editMonthText = function(rowIndex, monthIndex) {
         if (!window.isAdmin) return;
         // Ù„Ø§ Ù†ÙØ¹Ù„ Ø´ÙŠØ¦Ø§Ù‹ Ù‡Ù†Ø§ØŒ Ù†ØªØ±Ùƒ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ØŒ 
         // Ù„ÙƒÙ† Ø¥Ø°Ø§ Ø£Ø±Ø§Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù…Ø² ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙŠÙ…ÙƒÙ† Ø¹Ù…Ù„ ÙƒÙˆØ¯ Ù‡Ù†Ø§.
         // Ø³Ù†ÙƒØªÙÙŠ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹.
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ (âœ” <-> âœ˜)
    window.toggleStatus = function(rowIndex, monthIndex) {
        if (!window.isAdmin) return;
        
        let currentStatus = window.currentData[rowIndex].months[monthIndex];
        
        if (currentStatus.includes('âœ”')) {
            window.currentData[rowIndex].months[monthIndex] = 'âœ˜';
        } else {
            window.currentData[rowIndex].months[monthIndex] = 'âœ”';
        }
        
        renderTable(window.currentData);
    };
</script>

</body>
</html>
